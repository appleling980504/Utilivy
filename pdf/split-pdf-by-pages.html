<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Split PDF by Pages</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
</head>
<body class="bg-gray-100">
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">ðŸ“„ Split PDF by Pages</h1>

    <input type="file" id="pdfFile" accept="application/pdf" class="mb-4"/>
    <button id="splitBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Split PDF</button>

    <div id="status" class="mt-4 text-sm text-gray-600"></div>
  </main>

  <script type="module">
    import { PDFDocument } from "https://cdn.jsdelivr.net/npm/pdf-lib/+esm";
    import JSZip from "https://cdn.jsdelivr.net/npm/jszip/+esm";
    import { saveAs } from "https://cdn.jsdelivr.net/npm/file-saver/+esm";

    const splitBtn = document.getElementById('splitBtn');
    const status = document.getElementById('status');

    splitBtn.addEventListener('click', async () => {
      const input = document.getElementById('pdfFile');
      const file = input.files[0];

      if (!file) return alert('Please upload a PDF file.');

      status.textContent = 'Splitting PDF... please wait.';

      const arrayBuffer = await file.arrayBuffer();
      const pdfDoc = await PDFDocument.load(arrayBuffer);
      const pageCount = pdfDoc.getPageCount();

      const zip = new JSZip();

      for (let i = 0; i < pageCount; i++) {
        const newPdf = await PDFDocument.create();
        const [copiedPage] = await newPdf.copyPages(pdfDoc, [i]);
        newPdf.addPage(copiedPage);

        const pdfBytes = await newPdf.save();
        zip.file(`page-${i + 1}.pdf`, pdfBytes);
      }

      const zipBlob = await zip.generateAsync({ type: 'blob' });
      saveAs(zipBlob, 'split-pages.zip');
      status.textContent = 'Done! Your file is downloading.';
    });
  </script>
</body>
</html>
